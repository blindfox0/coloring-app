<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>HTML5 Starter Template</title>
    <meta name="description" content="Starter Template">
    <meta name="author" content="Gregry Pike">
    <link rel="stylesheet" href="mainStyle.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300&family=Pacifico&display=swap" rel="stylesheet">
    <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>

<body>
    <div id="listOfImages">
    </div>
    <script type="text/javascript">
        var listOfImages = document.getElementById("listOfImages");
        var xhr = new XMLHttpRequest();
        xhr.open("GET", "/images-code/images", true);
        xhr.responseType = 'document';
        xhr.onload = () => {
            if (xhr.status === 200) {
                var elements = xhr.response.getElementsByTagName("a");
                for (x of elements) {
                    if (x.href.match(/\.(jpe?g|png|gif)$/)) {
                        /* tutaj tworzymy obiekt img, ktoremu przypisany jest adres obrazka jpg (x.href) */
                        /* nastepnie wyciagmy tytul obrazka (x.title) i wyciagamy z niego sama nazwe pliku */
                        /* na podstawie nazwy pliku tworzymy element link i przypisujemy mu adres z nazwa pliku + .html */
                        /* laczymy relacja rodzic dziecko obrazek img z linkiem do kolorwanki */
                        /* link obrazkowy do odpowiadajacej kolorowanki trafia do diva listOfImages */
                        /* dodanie do folderow nowego pliku html z kolorowanka i obrazka jpg dla niego */
                        /* doda obrazkowy link do strony glownej */
                        let img = document.createElement("img");
                        img.src = x.href;
                        var title = x.title;
                        var fileName = title.slice(0, title.length - 4);
                        img.classList.add('images');
                        let link = document.createElement('a');
                        link.href = "/images-code/" + fileName + ".html";
                        link.appendChild(img);
                        listOfImages.appendChild(link);
                        console.log(x.href);
                    }
                };
            } else {
                alert('Request failed. Returned status of ' + xhr.status);
            }
        }
        xhr.send()
    </script>
</body>

</html>